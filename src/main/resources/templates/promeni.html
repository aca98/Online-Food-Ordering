<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head id="head">
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<nav id="nav"></nav>
<th:block th:utext="${errorMess}"></th:block>
<div class="row mx-auto">

    <table class="col-sm-12 col-md-6 table table-bordered">
        <thead>
        <tr>
            <th scope="col">Naziv</th>
            <th scope="col">Sastojci</th>
            <th scope="col">Cena</th>
            <th scope="col">Kolicina</th>
            <th scope="col"></th>

        </tr>
        </thead>
        <tbody>
        <tr th:each="test: ${test}">
            <th id="naziv" th:text="${test.naziv}"></th>
            <td id="sastojci" th:text="${test.sastojci}"></td>
            <td id="cena" th:text="${test.cena}"></td>
            <td><input id="kolicina" type="text" class="form-control" value="1"></td>

            <td>
                <button th:data-value="${test.id_proizvod}" class="button" onclick=Promeni(this)>Promeni</button>
            </td>

        </tr>
        </tbody>
    </table>
    <form class="col-sm-12 col-md-6 mx-auto" method="post" action="/promeni">
        <input name="id" type="text" class="form-control" id="formId" hidden="hidden">
        <div class="form-group">
            <label for="formNaziv">Naziv</label>
            <input th:classappend="${errorStyle}" name="naziv" type="text" class="form-control" id="formNaziv">
        </div>
        <div class="form-group">
            <label for="formSastojci">Sastojci</label>
            <input th:classappend="${errorStyle}" name="sastojci" type="text" class="form-control" id="formSastojci">
        </div>
        <div class="form-group">
            <label for="formCena">Cena</label>
            <input th:classappend="${errorStyle}" name="cena" type="number" class="form-control" id="formCena">
        </div>
        <button type="submit" class="btn btn-primary w-100">Sacuvaj</button>
    </form>
</div>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
<script src="./js/jquery-3.5.1.min.js"></script>

<script>
function Promeni(btn) {
    let par =  btn.parentElement.parentElement;
    document.querySelector("#formNaziv").value = par.querySelector("#naziv").innerHTML.trim();
    document.querySelector("#formSastojci").value = par.querySelector("#sastojci").innerHTML.trim();
    document.querySelector("#formCena").value = par.querySelector("#cena").innerHTML.trim();
    document.querySelector("#formId").value = btn.getAttribute("data-value");
}



</script>
</body>
</html>